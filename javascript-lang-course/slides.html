<!doctype html>  
<html lang="en">
	
	<head>
		<meta charset="utf-8">
		
		<title>Javascript Basics</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
		
		<link rel="stylesheet" href="../reveal.js/css/main.css">
		<link rel="stylesheet" href="../reveal.js/css/theme/simple.css" id="theme">
		
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

		<!-- jw styles -->
		<link rel="stylesheet" href="../reveal.js/jayway-theme/css/style.css" id="jayway-theme">

	<!-- Stylesheet -->
	<link href="sandbox.css" rel="stylesheet"/>
		
		<script>
			// If the query includes 'print-pdf' we'll use the PDF print sheet
			document.write( '<link rel="stylesheet" href="../reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>


	<!-- Templates -->
	
	<!-- The sandbox template: -->
	<script type="text/template" id="tplSandbox">
		<pre class="output"></pre>
		<div class="input">
			<textarea rows="1" placeholder="<%= placeholder %>"></textarea>
		</div>
	</script>

	<!-- The command/result template (NB whitespace/line breaks matter inside <pre> tag): -->
	<script type="text/template" id="tplCommand"><% if (! _hidden) { %><span class="command"><%= command %></span>
<span class="prefix"><%= this.resultPrefix %></span><span class="<%= _class %>"><%= result %></span>
<% } %></script>


	<!-- Scripts -->

	<!-- Underscore, Backbone, backbone-localStorage, jQuery -->
	<script src="libs/underscore.min.js"></script>
	<script src="libs/backbone.min.js"></script>
	<script src="libs/backbone-localStorage.min.js"></script>
	<script src="libs/jquery.min.js"></script>

	<!-- The JS Sandbox Console script (requires underscore, backbone and jquery): -->
	<script src="sandbox-console.js"></script>
	
	<!-- When ready, create the model and view -->
	<script type="text/javascript">
		jQuery(document).ready(function($) {
			// Create the sandbox, TODO maybe DRY it up :)
			new Sandbox.View({
				el : $('#sandbox1'),
				model : new Sandbox.Model({
					iframe : true,  // evaluate commands inside a hidden iframe (default: false)
					fallback : true // use global eval if iframe isn't available (default: true)
				})
			});

			new Sandbox.View({
				el : $('#sandbox2'),
				model : new Sandbox.Model({
					iframe : true,  // evaluate commands inside a hidden iframe (default: false)
					fallback : true // use global eval if iframe isn't available (default: true)
				})
			});

			new Sandbox.View({
				el : $('#sandbox3'),
				model : new Sandbox.Model({
					iframe : true,  // evaluate commands inside a hidden iframe (default: false)
					fallback : true // use global eval if iframe isn't available (default: true)
				})
			});

			new Sandbox.View({
				el : $('#sandbox4'),
				model : new Sandbox.Model({
					iframe : true,  // evaluate commands inside a hidden iframe (default: false)
					fallback : true // use global eval if iframe isn't available (default: true)
				})
			});

		});
	</script>


		<!--[if lt IE 9]>
		<script src="../reveal.js/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	
	<body>
		
		<div class="reveal">

	   	<img src="../reveal.js/jayway-theme/img/jayway-logo.png" class="jayway-logo header">

			<!-- Used to fade in a background when a specific slide state is reached -->
			<div class="state-background"></div>

			
			<!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>JavaScript Basics</h1>
          <p>Jayway Course</p>
          <p>
          <br>
          </p>
        </section>

        <section>
          <h2>Why JavaScript?</h2>
          <div>It's everywhere!</div>
          <div>(placeholder)</div>
        </section>

        <section>
          <h1>Early History</h1>
          <h2>LiveScript/Mocha - 1994-95</h2>
          <p>Developed by Brendan Eich at Netscape</p>
          <p>Intended as a light-weight Java-alternative</p>

          <h2>JavaScript, 1995-96</h2>
          <p>Included in Netscape Navigator 2.0</p>
          <p>Included in Microsoft IE 3.0, 1996</p>
          <p>(MS later renamed it <b>JScript</b>)</p>
          <p></p>
          <p>Standardized as <b>ECMAScript</b>, 1997</p>
        </section>

        <section>
          <h1>History, 2000-</h1>
          <p>ECMAScript goes up to revision 5</p>
          <p>Browser vendors race for highest performance</p> 
          <p>Google Chrome comes out in 2008 (V8)<p>
          <p>Enables high performance apps like node.js</p>
          <p>Many JavaScript engines still in heavy development today</p>
        </section>

        <section data-markdown>
            ### ECMAScript and JavaScript

            "JavaScript" is an ECMAScript variant managed by Mozilla. 
            All non-Mozilla implementations using JavaScript are implementing ECMAScript, rather than Javascript. 

        </section>


        <section data-markdown>
          Agenda
          ------

          * Basic Syntax and Variables
          * Control structures
          * Values: Numbers, Strings, Object, Functions ...
          * Context and This
          * Best Practices and Gotchas

        </section>

        <section data-markdown>
            ### Excercises:

            1. typeof, undefined, ==, ===, String
            2. anonymous functions
            3. higher-order functions and recursion
            4. object, scope and this

        </section>


        <section data-markdown>
            ### JavaScript Shells
            
            Example:

            * The embedded one in this presentation
            * Firefox scratchpad
            * [http:www.jsconsole.com](http://www.jsconsole.com) 
            * Mozialla SpiderMoney

                   `brew install spidermonkey;
                    js -i`

        </section>

        <section data-markdown>
            ### Whitespace

            Use secimolons, example:
                
                a = b + c
                (d + e).foo()
 
                // Treated as:
                //   a = b + c(d + e).foo();
        </section>

        <section data-markdown>
            ### Variable
               
                var x;  // declared but not defined
                var y = 0;
                z = 1; // always global scope DON'T !

        </section>

        <section data-markdown>
            ### Function Scope

                function a() { v1 = 42 }  // DON'T !
                a(); 
                v1 // => 42  GLOBAL
                function b() { var v2 = 43 }
                b();
                v2 // => "ReferenceError: v2 is not defined"
                var v3;
                function c() { v3 = 44 }
                c();
                v3 // => 44

        </section>

        <section data-markdown>
            ### No Block Scope

                var z = 4;
                if (true) {
                    var z = 5;
                }
                z;  => 5

        </section>

        <section data-markdown>
            ### equal: == and ===
           
            _operator == does type coercion_

            _operator === does **NOT** do type coercion_

                //because 'true' is converted to 1 and then compared
                true == 1; // true

                //because 2 is converted to "2" and then compared
                "2" == 2; // true 
    
                // Using the === operator (Identity)
                true === 1 //false
                "2" === 2 // false

        </section>

        <section data-markdown>
            ### if else if else

                if (a === b) {
                   "a equals b";
                } else if (a === c) {
                   "a equals c";
                } else {
                   "a does not equal either b or c";
                }

            Or 

                a === b ? "a equal b" : "a not equal b"
        </section>

        <section data-markdown>
            ### Boolean Operators && ||
        </section>


        <section data-markdown>
            ### while

                while (c < 10) {
                   c += 1;
                   // ...
                }
        </section>

        <section data-markdown>
            ### while

                while (c < 10) {
                   c += 1;
                   // ...
                }
        </section>

        <section data-markdown>
            ### do... while

                do {
                   c += 1;
                } while (c < 10)  

        </section>


        <section data-markdown>
            ### switch

                switch(i) {
                  case 1:
                     // ...
                     break;
                  case 2:
                     // ...
                    break;
                  default:
                    // ...
                  break;
                }

        </section>

        <section data-markdown>
            ### for

                var myStringArray = ["Hello","World"];
                for (var i = 0; i < myStringArray.length; i++) {
                   show(myStringArray[i]);
                }


        </section>

        <section data-markdown>
            ### break 

                for (i=0;i<10;i++)
                {
                   if (i==3) break;
                   x=x + "The number is " + i + "<br />";
                }

        </section>


        <section data-markdown>
            ### continue

                for (i=0;i<=10;i++)
                {
                   if (i==3) continue;
                   x=x + "The number is " + i + "<br />";
                }
        </section>


        <section data-markdown>
            ### try catch finally

                try{
                  undefinedfunction();
                  alert('I guess you do exist');
                }
                catch(e){
                  alert('An error has occurred: '+e.message);
                }
                finally{
                  alert('I am alerted regardless of the outcome above');
                }

        </section>


        <section data-markdown>
            ### Throw

                throw "Oops" // no stack trace

                throw new Error("Ooops") // now with stack trace

                throw { 
                   name: exceptionName, 
                   message: reason
                }


        </section>

        <section data-markdown>
            ### Values
            * Numbers
            * Strings
            * Booleans
            * Object
            * null
            * undefined
            * Arrays (object)
            * Regular Expressions (object)
            * Functions (object)
        </section>


        <section data-markdown>
            ### Strings

                //example:
                var txt  = 'Hello World!';
                var txt2 = "I'm happy" + " happy";

            _Sequence of 16 bit elements interpreted as UTF-16._

        </section>

        <section data-markdown>
            ### String Methods

            charAt, concat, indexOf, lastIndexOf, match, replace, search, slice, split, substring, toLowerCase, toUpperCase

        </section>


        <section data-markdown>
            Numbers
            -------

            _Represents both integers and reals. 64 bit._

                var a = 352661;
                var b = 334.22;

            Special values:

                NaN
                +Infinity
                -Infinity

        </section>

        <section data-markdown>
            ### Numbers

                test("Strange arithmetic", function() {
                    var a = NaN;
                    equals( a &lt;  10, false, "bigger than 10");
                    equals( a &gt;  10, false, "smaller than 10");
                    equals( a === 10, false, "not equal to 10");
                    equals( a === NaN, false, "not NaN??? " );
                    equals( isNaN( a ), true, "Ahh!!" );
                });


            _Caveat: some operators only work on 32 bit numbers. A silent conversion
            will be performed by the operator._
        </section>

        <section data-markdown>
            ### String to Number

            parseInt, parseFloat and Number:

                parseInt(“1234blue”); //returns 1234
                parseInt(“0xA”); //returns 10
                parseInt(“22.5”); //returns 22
                parseInt(“blue”); //returns NaN

                parseFloat(“1234blue”); //returns 1234.0
                parseFloat(“0xA”); //returns NaN
                parseFloat(“22.5”); //returns 22.5

                Number('42.0') // returns 42
        </section>

        <section data-markdown>
            ### Number to String

                var num = 15;
                num.toString();

                // or
                15 + "";

                // or 
                String(15);
        </section>


        <section data-markdown>
            ### Booleans

                //Two possible values: true or false
                var a = true;
                var b = a &amp;&amp; ( a == false );

        </section>

        <section data-markdown>
            ### Falsy values

            * false
            * null
            * undefined
            * ""
            * 0
            * NaN

            _All other values are truthy_

        </section>

        <section data-markdown>
            ### undefined and null

            _'undefined' - Anything unassigned or not declared._

            null is a special value meaning "no value".

                equals("object", typeof null, "type of null is object");

        </section>

        <section data-markdown>
            ### undefined and null

            _On the other hand, undefined means that the variable has not been declared, or has not been given a value._

                var input;
                if(input === undefined) {
                    doThis();
                } else {
                    doThat();
                }

        </section>

        <section data-markdown>
            Equality and Comparison
            -----------------------

            '==' can produce confusing results

                equals( false, '' == '0' );
                equals( true, 0 == '' );
                equals( true, 0 == '0' );

                equals( false, false == 'false' );
                equals( true, false == '0' );

                equals( false, false == undefined );
                equals( false, false == null );
                equals( true, null == undefined );

                equals( true, ' \t\r\n ' == 0 );

        </section>


        <section data-markdown>
          ### Excercise

          * typeof null ?
          * 'x' == new String('x') ? with === ?
          * typeof unknownVariable ?
          * null == undefined and null === undefined
          * undefined || 'Hello'
          * "Hello " + undefined + 2

        </section>
        <section>
          <p>Excercise</p>

     	  <div class="sandbox" id="sandbox1">sandbox console loading...</div>
        </section>

        <section data-markdown>
            ### Functions

            # First Class Citizen

        </section>

        <section data-markdown>
            ### Function Statement

                function foo() {}

            expands to

                var foo = function foo() {};

        </section>

        <section data-markdown>
            ## Anonymous Functions

                var f = function(a, b) { return a + b; }
        </section>

        <section data-markdown>
            ### Invokation

            by parenthesis

                //Example:
                var greeter = function() { return 'hello'; }
                
                greeter // a reference to the function
                greeter() // invocation of the function
                equals( 'hello', greeter(), 'invocation')

        </section>

        <section data-markdown>
            ### Arguments

            Arguments bound if present, e.g:

                (function (x, y) {return x + y}) (’foo’)  # => ’fooundefined’
                
        </section>

        <section data-markdown>
            ### Lazy Scoping

                var bar = function () {return bar};
                bar () === bar;  // => true

        </section>

        <section data-markdown>
            ### First Class Citizen

            means

            * Can be arguments to functions
            * Can be returned from functions

        </section>

        <section data-markdown>
            ### Example

                _f('whack')();

            `_f` is a function returning a function

        </section>

       <section data-markdown>
            ### Returning Functions

                var sayHello = function() {
                  return function() { return "Hello " + name; }
                };
                var helloMe = sayHello('andreas');
                helloMe(); // => "Hello andreas"
        </section>

        <section data-markdown>
            ### Excercise

            * Write an ananymous function returning your name.

                    var x = function()...
                    x;  //  "Your Name"

        </section>

        <section>
          <p>Excercies</p>
     	  <div class="sandbox" id="sandbox2">sandbox console loading...</div>
       </section>


        <section data-markdown>
            ## Arrays
       
            * Array inherits from object !
            * Indexes are converted to strings
            * The `length` property can be set !
        </section>

        <section data-markdown>
            ## Arrays

            * [ ]
            * names =  [ ‘Rudolph’, ‘Kjell’, ‘Torsten’]
            * typeof value == ‘object’  !!!
            * value.constructor === Array
        </section>

        <section data-markdown>
            ## Array Methods

            * `concat`, `join`, `pop`, `push`, `slice` , `sort`, `splice`, `length`
            * ECMAScript 5 (IE 9)
               * `forEach`, `indexOf`, `lastIndexOf`, `filter`, `map`, `every`, `some`, `reduce`, `reduceRight`
        </section>

        <section data-markdown>
            ### Example

                var v = ['foo', 42, false];
                v.length = 2;
                v.foo = 'bar'
                v; // => ['foo', 42]
                v[0]; // 'foo' 
        </section>

        <section data-markdown>
            ### Exercise
             
            Impl. function 'sum' so that:

                sum([1,2,3]) # => 6

            Impl. function 'each' so that:

                var total = 0;
                each([1,2,3], function(q) { x += q})
                total # => 6

            Impl. 'times' with recursion:
           
                times(10, function(x) { s += 1 })
                total // => 10
        </section>

        <section>
          <p>Excercies</p>
     	  <div class="sandbox" id="sandbox3">sandbox console loading...</div>
       </section>

        <section data-markdown>
            ### Objects

            An object is a container of keys and values.

                var myObject = { 
                   name: 'Andreas', 
                   sayHello: function() {... }
                }

        </section>


	<section>
	    <p>Retrieval</p>
            <pre><code>
var flight = {
  airline: "Oceanic",
  departure : {       
    IATA: "SYD",
    time: "2004-09-22 14:55",
    city: "Sydney"
  }
}
flight.departure.city;
// Same as
flight["departure"]["city"];            
            </code></pre>
        </section>

	<section>
	    <p>Object Methods</p>
            <pre><code>
var myObject = {
  name: 'andreas',
  sayHello: function() { alert("hello") }
}
myObject.sayHello // the function reference
myObject.sayHello();
            </code></pre>
        </section>

	<section>
	    <p>Non-existent properties</p>
            <pre><code>
flight.foo // undefined
flight['foo'] // undefined
flight.foo.city; // undefined
            </code></pre>
        </section>

	<section>
	    <p>Setting Non-existent properties</p>
            <pre><code>
flight.foo = 'bar';
flight['baaz'] = 42
            </code></pre>
        </section>

	<section>
            <pre><code>
delete flight.foo
flight.foo // undefined
            </code></pre>
        </section>


        <section data-markdown>
            ### Prototype-based programming

            * OO without classes !
            * Inheritance by object delegation
       </section>

       <section>
	    <p>The Prototype Chain</p>
             <pre><code>
var foo = {name: "foo", one: 1, two: 2};
var bar = {two: 'two'};
// Make bar delegate method calls the prototype foo:
bar.__proto__ = foo;  // don't do this !
bar.one // Resolves to 1.
bar.two // Resolves to 'two'
delete bar.two
bar.two // Resolves to 2
            </code></pre>
       </section>
                 

        <section data-markdown>
          <h3>Prototypal Inheritance</h3>
          
          Object inherits (shared properties) from objects !
          
          `new F()` produce a new object that inherits from `F.prototype` 
          `F` is a constructor function.

        </section>

        <section data-markdown>
            ### The Constructor Functions

                function Pet(species) {
                    this.species = species;
                    this.sayHello = function() { 
                      return "Hello " + this.species; 
                    }
                 }
                 var cat = new Pet('cat');
                 cat.sayHello(); 
        </section>
     
        <section data-markdown>
            ### The prototype

            Constructor functions has a property `prototype`

                function Pet(species){
                    this.species = species;
                }

                Pet.prototype.sayHello = function() { 
                   return "Hello " + this.species;
                }

        </section>

        <section data-markdown>
            ### The prototype property

            * Is used to share properties
            * Is used for inheritance

        </section>
   

        <section data-markdown>
            ## Built-in Prototypes
            
            * Object.prototype
            * Array.prototype
            * Function.prototype
            * Number.prototype
            * String.prototype
            * Boolean.prototype
        </section>

       <section data-markdown>
           ## Extending

               // Avoid doing this !
               Array.prototype.last = function() {
                   return this[this.length - 1];
               };

               [1.2.3].last(); // => 3
        </section>

	<section>
	    <p>Object.create</p>
            <pre><code>
var foo = {name: "foo", one: 1, two: 2};
var bar = Object.create(foo); // do this !
bar.one // Resolves to 1.
bar.two // Resolves to 'two'
            </code></pre>
        </section>

       <section>
	    <p>Prototypal Inheritance</p>
          <pre><code>
// define a base object
var foo = {
    name: "foo",
    sayHello: function() {
        alert("hello from " + this.name);
    }
};
foo.sayHello();
            </code></pre>
      </section>

       <section>
	    <h3>Prototypal Inheritance</h3>
            <pre><code>
var foo = {
    name: "foo",
    sayHello: function() {
        alert("hello from " + this.name);
    }
};

// define a object 'inheriting' from object bar 
var bar = Object.create(foo);
bar.sayGoodbye = function() {
    alert("goodbye from " + this.name);
}
bar.sayHello();
bar.sayGoodbye();
            </code></pre>
      </section>

        <section data-markdown>
            ### Object.create Impl.

                Object.create = function(o) {
                    function F() {}
                    F.prototype = o;
                    return new F();
                 }
        </section>

        <section data-markdown>
            ## JSON

            * A subset of javascript
            * JavaScript Object Notation 
                * objects
                * arrays
                * strings
                * numbers
                * booleans
                * null
        </section>

        <section>
            <p>JSON</p>
            <pre><code>
            var flight = {
                airline: "Oceanic",   // string
                number: 815,          // number
                departure : {          // object
                    IATA: "SYD",
                    time: "2004-09-22 14:55",
                    city: "Sydney"
                },
                arrival : {            // object
                    IATA : "LAX",
                    time : "2004-09-23 10:42",
                    city : "Los Angeles"
                }
            };
            </code></pre>
        </section>

        <section>
            <p>JSON</p>
            <pre><code>
                // array of objects
                var array = [
                    {
                        firstName : "John",
                        lastName  : "Doe",
                        mobile    : 2353,
                        loggedin  : true
                    },
                    {
                        firstName : "Mary",
                        lastName  : "Smith",
                        mobile    : 3243,
                        loggedin  : false
                    },
                    {
                        firstName : "Fax",
                        lastName  : "",
                        mobile    : 1234,
                        loggedin  : null
                    }
                ];
            </code></pre>
        </section>

        <section data-markdown>
            ## Scope

            The function is the scope of the variables.
        </section>

        <section data-markdown>
            ## Function Scope

                var iAmGlobal = 42;
                var x = function(){ 
                   var secret = 1;
                   return iAmGlobal + 1;
                }(); # => 43
               
                secret # => ReferenceError: secret not defined

        </section>

        <section data-markdown>
            ## This

            Refers to: how we get into the neighborhood 

                var x = { 
                  name: 'andreas',
                  me: function() { return this.andreas; }
                };

                # Calling an Object's Method:
                x.me(); # => 'andreas'

                var y = x.me
                y(); # => ""  !!!
                this.name = 'root';
                y(); #=> 'root'
        </section>

        <section data-markdown>
            ## Root Context

                function test_this() { 
                   return this; 
                } 
                var i_wonder_what_this_is = test_this(); 

            this reference the window object

            (for browsers)
        </section>

        <section>
            Eventhandling

            <pre><code>
  function click_handler() { 
   alert(this); // alerts the window object 
  } 

 button id='thebutton' onclick='click_handler()'>Click me!</button>
            </code></pre>
This is the DOM element clicked

        </section>

        <section data-markdown>
            ## Manipulating Context/this

            * apply
            * call

        </section>

        <section data-markdown>
            ## Call

                 var first_object = { 
                  num: 42 
                 }; 
                 var second_object = { 
                  num: 24 
                 }; 
  
                 function multiply(mult) { 
                  return this.num * mult; 
                 } 
  
                 multiply.call(first_object, 5); // returns 42 * 5 
                 multiply.call(second_object, 5); // returns 24 * 5 
        </section>

        <section data-markdown>
            ## Apply

            Similar to call, but with args as an array:

                multiply.apply(first_object, [5]); // returns 42 * 5 
                multiply.apply(second_object, [5]); // returns 24 * 5 
        </section>

        <section data-markdown>
            ### Excerise 1

            Impl. an object which translates a string like this:

                var t = { ... }
                t.hello = 'hej';
                t.world = 'värld';
                t.translate("hello world") # => "hej värld"

            Use Array methods: `forEach`, `push`, `join`

            Use String method: `split(' ')`

        </section>

        <section data-markdown>
            ### Excerise 2

            Prototypal Inheritance

                var base = { foo: 'bla'};
                var sub = Object.create(base);

            What happens when 
  
                base.foo = 'changed'
                sub.foo // ??

        </section>

        <section data-markdown>
            ### Exercise 3

                function Bar() {}
                var a = {name: "foo"};
                // write one line here, so that :
                b = new Bar();
                b.name // => "foo"
                a.name = 'bar';
                b.name // => "bar"
        </section>

        <section>
          <p>Excercise</p>

     	  <div class="sandbox" id="sandbox4">sandbox console loading...</div>
        </section>


        <section data-markdown>
            ## Dynamic Compilation
            * eval
                * Evaluates a string and returns the result.
            * new Function(parameterArray, codeString)
                * Creates and returns a function.
                * var add=new Function("a", "b", "return a+b;");
        </section>

        <section data-markdown>
            ### Regular Expressions

                 var re5digit = /^\d{5}$/; or new RegExp("pattern")
                 "12312".search(re5digit) // # => 0

        </section>

        <section data-markdown>
            ## Best Practices
        </section>

        <section data-markdown>
            ## Modules

                var MyNamespace = {};
                var MyNS = MyNS || {};
        </section>

        <section data-markdown>
            ## Cascade

                setFirst: function(name) {
                  this.first = name;
                  return this;
                } 
                person
                .setFirst(“Anders”)
                .setLast(“Janmyr”)
                .setAge(40);
       </section>

        <section data-markdown>
            ## Encapsulation

                var Esperanto = Esperanto || {};

                Esperanto.Lab = function() {
                    var privVar = "example";
                    function privFunc() {
                        return privVar;
                    }
                    return {
                        example: function() {
                            return privFunc();
                        }
                    }
                }()

        </section>


        <section data-markdown>
            ## Local Functions

                costData: function(current) {
                    var data = {};
                    function addEntry(name, cost) {
                        data[name + "PerHour"] = model.withTwoDec(cost/hours);
                        data[name] = model.noDecimalsWithSeparator(cost);
                    };

                    addEntry("interest", this.financialCost(current)),
                    addEntry("depreciation", this.depreciationCost(current)),
                    return data;
                },
        </section>

        <section data-markdown>
            ## self = this

                attachFormListener: function(form, object) {
                    var self = this;
                    function populator(event) { 
                       self.populateFromForm(form, object);
                       object.notify();
                    };

                    form.getElements().each(function(child) {
                       child.observe('change', populator);
                    });
                 }

        </section>

        <section data-markdown>
            ### JavaScript Strict Mode

            * Available ECMAScript 5
            * Throws errors for error prone code.
            * Don't use globally - can break third party libs.
        </section>

        <section data-markdown>
            ### Strict Usage

                  function doSomething() {
                     "use strict";
                     // this runs in strict mode
                  }

        </section>

        <section data-markdown>
            ### javascript gotchas

            Be aware of:
 
                "1" == 1 // true

            Advice:
 
                Number("1") === 1

        </section>

        <section data-markdown>
            ### parseInt doesn't assume base-10

            Be aware of:
 
                parseInt("8"); //8
                parseInt("08"); //0

            Advice:
 
                parseInt("8", 10); //8
                parseInt("08", 10); //8

        </section>


        <section data-markdown>
            ### instanceof

            Be aware of:

                "hello" instanceof String; //false
                new String("hello") instanceof String; //true

        </section>


        <section data-markdown>
            ### instanceof

            Be aware of:

                typeof [1,2,3]  // 'object'
                [1,2,3] instanceof Array // true

        </section>

        <section data-markdown>
            ### Avoid new Object()

            Be aware of:

                var q = new Object(42);
                q instanceof Number  // => true
                var w = new Object("42")
                w instanceof Number  // => false
                w instanceof String  // => true

            Advice, use literals:

                var a = {}
                var b = "42";


        </section>

        <section data-markdown>
            ### Advices

            * Javascript strict mode
            * JSLint, Closure Compiler
            * CoffeeScript
            * Test Frameworks (of course !) 
        </section>

        <section>
            <p>CoffeeScript Example</p>

<code><pre>
            class Animal
               constructor: (@name) ->

               move: (meters) ->
                  alert @name + " moved #{meters}."
</pre></code>
        </section>

        <section>
            <p>Compiles to</p>
<code><pre>
Animal = (function() {

  function Animal(name) {
    this.name = name;
  }

  Animal.prototype.move = function(meters) {
    return alert(this.name + (" moved " + meters + "m."));
  };

  return Animal;

})();
</pre></code>
        </section>


      </div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Presentation progress bar -->
			<div class="progress"><span></span></div>
			
		</div>

		<script src="../reveal.js/lib/js/head.min.js"></script>
		<script src="../reveal.js/js/reveal.min.js"></script>

		<script>
			
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				
				theme: Reveal.getQueryHash().theme || 'default', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/linear(2d)

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: '../reveal.js/lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
					{ src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../reveal.js/lib/js/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../reveal.js/lib/js/data-markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '/socket.io/socket.io.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
					{ src: 'plugin/speakernotes/client.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
				]
			});
			
		</script>

	</body>
</html>
